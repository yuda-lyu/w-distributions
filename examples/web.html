<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-tw">

    <head>
        <meta http-equiv="content-type" content="text/html charset=UTF-8" />
        <title>w-distributions</title>

        <script src="https://cdn.jsdelivr.net/npm/wsemi/dist/wsemi.umd.js"></script>
        <script>
            let log = console.log
            console.log = function(){
                log.apply(null, arguments)
                wsemi.bodyLog.apply(null, arguments)
            }
        </script>
    
        <script src="https://cdn.jsdelivr.net/npm/w-distributions@1.0.5/dist/w-distributions.umd.js"></script>
        
    </head>

    <body>

        <script>

            let wd = window['w-distributions']
            // console.log('wd',wd)
            
            //å› æœ‰ä½¿ç”¨WebAssemblyæ•…ç„¡æ³•æ–¼IE11é‹è¡Œ, é€™é‚Šå°±ç›´æŽ¥ç”¨asyncå‡½æ•¸
            async function test() {
                let r


                //Normal
                let normal1_2 = await wd.Normal(1, 2) //mean=1,std deviation=2

                r = normal1_2.pdf(1)
                console.log(`normal1_2.pdf(1)`, r)
                // => 0.19947114020071632

                r = normal1_2.cdf(1)
                console.log(`normal1_2.cdf(1)`, r)
                // => 0.5

                r = normal1_2.inv(1)
                console.log(`normal1_2.inv(1)`, r)
                // => Infiniy

                r = normal1_2.mean()
                console.log(`normal1_2.mean()`, r)
                // => 1

                r = normal1_2.median()
                console.log(`normal1_2.median()`, r)
                // => 1

                r = normal1_2.variance()
                console.log(`normal1_2.variance()`, r)
                // => 4


                //Normal
                let normal3_0025 = await wd.Normal(2.947834716, 0.025418535) //mean=2.947834716,std deviation=0.025418535

                r = normal3_0025.inv(0.25)
                console.log(`normal3_0025.inv(0.25)`, r)
                // => 2.9306901746775

                r = normal3_0025.inv(0.75)
                console.log(`normal3_0025.inv(0.75)`, r)
                // => 2.9649792573225002


                //Studentt
                //compare with: https://stattrek.com/online-calculator/t-distribution.aspx

                let studentt34 = await wd.Studentt(34) //degrees of freedom=34

                r = studentt34.inv(0.95) //one or two sided test p-values=0.95
                console.log(`studentt34.inv(0.95)`, r)
                // => 1.6909242551868549

                let studentt4 = await wd.Studentt(4) //degrees of freedom=4

                r = studentt4.inv(0.05) //one or two sided test p-values=0.05
                console.log(`studentt4.inv(0.05)`, r)
                // => -2.1318467863266504

                //åœ¨è‡ªç”±åº¦ 10 çš„ t åˆ†å¸ƒä¸­ï¼Œè«‹æ‰¾å‡º t0.05,10æ•¸å€¼ï¼Œè©²é»žåœ¨ t åˆ†å¸ƒå³å°¾æ©ŸçŽ‡ p = 0.05
                let studentt10 = await wd.Studentt(10) //degrees of freedom=10
                r = studentt10.inv(1 - 0.05)
                console.log(`studentt10.inv(1 - 0.05)`, r)
                // => 1.8124611228116756 //Excel T.INV: t(0.05,10) = 1.8125

                //å·¦å°¾æ©ŸçŽ‡ p = 0.05
                r = studentt10.inv(0.05)
                console.log(`studentt10.inv(0.05)`, r)
                // => -1.8124611228116756 //Excel T.INV: -t(0.05,10) = -1.8125

                //[å€é–“ä¼°è¨ˆ(Interval estimation)] http://eschool.kuas.edu.tw/tsungo/Publish/08%20Interval%20estimation.pdf

                //[ç¯„ä¾‹8.18(pp.19)]æ¸¬é‡å…¶é«”ç©åˆ†åˆ¥ç‚º 620ã€655ã€670ã€635ã€665ã€648ã€641 å’Œ 642 mlï¼Œè«‹ä¼°ç®—æ¯æ¯çç å¥¶èŒ¶å¹³å‡å®¹é‡çš„ 95 %ä¿¡è³´å€é–“
                //æ¨£æœ¬å¹³å‡å€¼ð‘¥Ì…= 647.00 mlï¼Œæ¨£æœ¬æ¨™æº–(å)å·® S = 16.27 mlã€‚è‡ªç”±åº¦ v = nâ€“1 = 8â€“1 = 7ï¼Œä¿¡è³´æ°´æº– 1â€“Î± = 0.95ï¼Œé¡¯è‘—æ°´æº– Î± = 0.05
                //ð‘¡(ð›¼/2),ð‘›âˆ’1 = ð‘¡0.025,(8âˆ’1=7) = t0.025,7 = 2.3646
                //ä¸‹é™: 647 â€“ 2.3646 Ã— 16.27 / sqrt(8) = 647 â€“ 13.6 = 633.4 ml
                //ä¸Šé™: 647 + 2.3646 Ã— 16.27 / sqrt(8) = 647 + 13.6 = 660.6 ml
                let studentt7 = await wd.Studentt(7)
                r = studentt7.inv(1 - 0.025)
                console.log(`studentt7.inv(1 - 0.025)`, r)
                // => 2.364624251592785

                //[ç¯„ä¾‹8.22(pp.36)]æ¾³æ´²ç”Ÿè ”æ•¸é‡å±¬æ–¼(è¶¨è¿‘æ–¼)å¸¸æ…‹åˆ†å¸ƒï¼Œä¸Šå€‹æœˆ 31 å¤©ç‡Ÿæ¥­æ—¥æ¯æ—¥è²©å”®æ¾³æ´²ç”Ÿè ”å¹³å‡å€¼ð‘¥Ì…= 150 å€‹ï¼Œæ¨™æº–(å)å·® S = 20 å€‹ï¼Œè©¦æ±‚åœ¨ 95 %çš„ä¿¡è³´æ°´æº–ä¸‹ï¼Œæ¯æ—¥è‡³å°‘è¦æº–å‚™å¤šå°‘æ¾³æ´²ç”Ÿè ”ï¼Ÿ
                //ä½¿ç”¨ t åˆ†å¸ƒç²¾æº–ç®—æ³•ï¼šè‡ªç”±åº¦ v = n â€“ 1 = 31 â€“ 1 = 30ï¼Œé¡¯è‘—æ°´æº– Î± = 0.05ï¼ŒtÎ±,Î½ = t0.05,30 = 1.6973(ä½¿ç”¨ Excel è»Ÿé«” T.INV å‡½æ•¸æŸ¥è©¢ç²å¾—)ã€‚æ¯æ—¥è‡³å°‘è¦æº–å‚™çš„æ¾³æ´²ç”Ÿè ”æ•¸é‡ï¼Œå°‡æ‰€æœ‰å¯èƒ½çŠ¯éŒ¯çš„æ©ŸçŽ‡å…¨æ”¾åœ¨å³å´ï¼Œå±¬æ–¼å³å–®å°¾å€é–“ä¼°è¨ˆ
                //ð‘¥Ì… + tÎ±,v * S / sqrt(n) = 150 + 1.6973 Ã— 20 / sqrt(31) = 150 + 6.1 = 156.1
                let studentt30 = await wd.Studentt(30) //degrees of freedom=30
                r = studentt30.inv(1 - 0.05)
                console.log(`studentt30.inv(1 - 0.05)`, r)
                // => 1.6972608865939578

                //åœ¨å–®å°¾å€é–“ä¼°è¨ˆæ™‚ï¼Œæ¯é«”æ¨™æº–(å)å·® Ïƒ (æˆ–è®Šç•°æ•¸Ïƒ2)æœªçŸ¥ï¼Œåˆ©ç”¨æ¨£æœ¬æ¨™æº–(å)å·® S = sqrt( sum( (xi-ð‘¥Ì…)**2 ) / (n-1) ) å–ä»£æ¯é«”æ¨™æº–(å)å·® Ïƒ
                //å·¦å°¾: ð‘¥Ì… - tÎ±,v * S / sqrt(n) â‰¤ Î¼
                //å³å°¾: ð‘¥Ì… + tÎ±,v * S / sqrt(n) â‰¥ Î¼
                //n: æ¨£æœ¬æ•¸
                //ð‘¥Ì…: æ¨£æœ¬å¹³å‡å€¼
                //S: æ¨£æœ¬æ¨™æº–(å)å·®, S = sqrt( sum( (xi-ð‘¥Ì…)**2 ) / (n-1) )
                //v: è‡ªç”±åº¦(è‡ªç”±åº¦ç­‰æ–¼æ¨£æœ¬æ•¸-1), v = n - 1
                //tÎ±,v = studentt(n-1).inv(1-Î±)


            }
            test()
                .catch((err) => {
                    console.log(err)
                })
    
        </script>
    
    </body>

</html>